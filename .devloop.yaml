settings:
  cycle_detection:
    enabled: false
  project_id: "lilbattle"
  color_logs: true
  color_scheme: "dark"
  prefix_logs: true
  prefix_max_length: 15
  default_debounce_delay: 2s

rules:
  # Go Backend Development & Testing
  - name: "betests"
    watch:
      - action: "include"
        patterns:
          - "web/server/*.go"
          - "lib/**/*.go"
          - "services/**/*.go"
    commands:
      - "echo 'ðŸ”§ Running LilBattle Tests...'"
      - "make test"
  - name: "backend"
    color: "blue"
    lro: true
    watch:
      - action: "include"
        patterns:
          - "web/server/*.go"
          - "lib/**/*.go"
          - "gen/**/*.go"
          - "cmd/**/*.go"
          - "services/**/*.go"
          - "go.mod"
          - "go.sum"
      - action: "exclude"
        patterns:
          - "**/*.log"
          - "**/*.log"
          - "web/**/*"
          - "web"
    commands:
      - "echo 'ðŸ”§ Building and Serving LilBattle...'"
      - "make cli wasm servelocal"

  # Frontend Development & Testing
  - name: "frontend"
    skip_run_on_init: true
    color: "green"
    workdir: "./web"
    watch:
      - action: "exclude"
        patterns:
          - "gen/**"
          - "**/*.log"
          - "node_modules/**"
          - "dist/**"
          - "test-results/**"
          - "playwright-report/**"
          - "node_modules"
      - action: "include"
        patterns:
          - "**/*.ts"
          - "**/*.css"
          - "**/*.html"
          - "**/*.spec.ts"
          - "**/*.test.ts"
          - "package.json"
          - "vite.config.ts"
          - "tsconfig.json"
    commands:
      - "echo 'âš¡ Building frontend...'"
      - "npm run build"
