{{ $theme := .Theme }}
{{ $tile := .Tile }}
{{ $playerCoins := .PlayerCoins }}
{{ $rulesTable := .RulesTable }}
<!-- Build Options Modal Content -->
<div class="space-y-3">
  <!-- Header showing current coins -->
  <div class="flex items-center justify-between mb-4 px-4 py-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800">
    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Available Coins</span>
    <div class="flex items-center gap-1">
      <span class="text-lg font-bold text-yellow-600 dark:text-yellow-400">ü™ô {{ $playerCoins }}</span>
      <span class="text-sm text-gray-500 dark:text-gray-400">coins</span>
    </div>
  </div>

  <!-- Build Options List -->
  {{ range $index, $buildOption := .BuildOptions }}
  {{ $unitDef := index $rulesTable.Units $buildOption.UnitType }}
  {{ $canAfford := ge $playerCoins $buildOption.Cost }}
  <button
    class="build-option-button w-full text-left p-4 rounded-lg border-2 transition-all {{ if $canAfford }}bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600 cursor-pointer{{ else }}bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 opacity-60 cursor-not-allowed{{ end }}"
    data-option-index="{{ $index }}"
    data-unit-type="{{ $buildOption.UnitType }}"
    data-cost="{{ $buildOption.Cost }}"
    {{ if not $canAfford }}disabled{{ end }}
  >
    <div class="flex items-start gap-3">
      <!-- Unit Icon -->
      <div class="flex-shrink-0 w-16 h-16 flex items-center justify-center bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700">
        <img
          class="theme-unit-image w-12 h-12 object-contain"
          data-unit-id="{{ $buildOption.UnitType }}"
          data-player-id="{{ $tile.Player }}"
          style="image-rendering: pixelated"
        />
      </div>

      <!-- Unit Info -->
      <div class="flex-1 min-w-0">
        <!-- Unit Name and Type -->
        <div class="flex items-baseline gap-2 mb-1">
          <h3 class="font-semibold text-base text-gray-900 dark:text-white">
            {{ $theme.GetUnitName $buildOption.UnitType }}
          </h3>
          {{ if $unitDef }}
          {{ if and $unitDef.UnitClass $unitDef.UnitTerrain }}
          <span class="text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
            {{ $unitDef.UnitClass }} {{ $unitDef.UnitTerrain }}
          </span>
          {{ end }}
          {{ end }}
        </div>

        <!-- Unit Stats -->
        {{ if $unitDef }}
        <div class="flex items-center gap-3 mb-2 text-xs text-gray-600 dark:text-gray-400">
          {{ if $unitDef.MovementPoints }}
          <span class="flex items-center gap-1" title="Movement">
            <span class="font-medium">‚ö° {{ printf "%.0f" $unitDef.MovementPoints }}</span>
          </span>
          {{ end }}
          {{ if $unitDef.AttackRange }}
          <span class="flex items-center gap-1" title="Attack Range">
            <span class="font-medium">üéØ {{ $unitDef.AttackRange }}</span>
          </span>
          {{ end }}
          {{ if $unitDef.Defense }}
          <span class="flex items-center gap-1" title="Defense">
            <span class="font-medium">üõ°Ô∏è {{ $unitDef.Defense }}</span>
          </span>
          {{ end }}
        </div>

        <!-- Unit Properties -->
        {{ if $unitDef.Properties }}
        <div class="text-xs text-gray-600 dark:text-gray-400">
          {{ range $unitDef.Properties }}
          <span class="inline-block mr-2">‚Ä¢ {{ . }}</span>
          {{ end }}
        </div>
        {{ end }}
        {{ end }}
      </div>

      <!-- Cost Badge -->
      <div class="flex-shrink-0 flex flex-col items-end">
        <div class="flex items-center gap-1 px-2 py-1 rounded {{ if $canAfford }}bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-200{{ else }}bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400{{ end }}">
          <span class="text-base font-bold">ü™ô {{ $buildOption.Cost }}</span>
        </div>
        {{ if not $canAfford }}
        <span class="text-xs text-red-600 dark:text-red-400 mt-1">Insufficient coins</span>
        {{ end }}
      </div>
    </div>
  </button>
  {{ end }}
</div>
