<!-- templates/Header.html -->
{{ define "Header" }}
<header
  class="bg-white dark:bg-gray-800 shadow-sm px-4 py-3 flex items-center justify-between"
>
  <!-- Logo and Site Name -->
  <div class="flex items-center">
    <div class="flex items-center space-x-2">
      <!-- Logo -->
      <a href="/">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8 text-blue-600 dark:text-blue-400"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"
            clip-rule="evenodd"
          />
        </svg>
      </a>

      <!-- Site Name -->
      <a href="/">
        <span class="font-bold text-xl text-gray-900 dark:text-white"
          >WeeWar</span
        >
      </a>
    </div>

    <!-- Tag Line -->
    <span
      class="hidden md:inline-block ml-3 text-sm text-gray-600 dark:text-gray-400 border-l border-gray-300 dark:border-gray-600 pl-3"
    >
      Classic WeeWar Clone
    </span>
  </div>

  <!-- Action Buttons -->
  <div class="flex items-center space-x-2">
    <!-- Desktop: Show buttons directly -->
    <div id="header-buttons-desktop" class="hidden md:flex items-center space-x-2">
      {{ block "ExtraHeaderButtons" . }} {{ end }}
    </div>

    <!-- Mobile: Dropdown Menu Button -->
    <div class="md:hidden">
      <button
        id="header-actions-menu-btn"
        type="button"
        class="p-2 rounded-md text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"
        aria-label="Page actions"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
        </svg>
      </button>
    </div>

    <!-- Theme Toggle Button -->
    <button
      id="theme-toggle-button"
      type="button"
      class="p-2 rounded-md text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"
      aria-label="Toggle theme"
    >
      <span id="theme-toggle-icon" class="inline-block h-5 w-5">
        <!-- Icon will be populated by JS -->
      </span>
    </button>
  </div>

  <!-- Hidden container for header buttons (used by JS to clone into dropdown) -->
  <div id="header-buttons-source" class="hidden">
    {{ block "ExtraHeaderButtons" . }} {{ end }}
  </div>
</header>

<!-- Mobile Header Dropdown Menu (outside header to avoid clipping) -->
<div
  id="header-actions-dropdown"
  class="hidden fixed w-56 rounded-lg shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 dark:divide-gray-700 focus:outline-none z-50"
>
  <div class="py-1" id="header-actions-dropdown-content">
    <!-- Buttons will be cloned here by JS -->
  </div>
</div>

<!-- Mobile Header Actions Drawer (for narrow screens with overflow constraints) -->
<div id="header-actions-drawer" class="hidden fixed inset-0 z-[60]">
  <!-- Backdrop -->
  <div class="header-drawer-backdrop absolute inset-0 bg-black transition-opacity duration-300 opacity-0"></div>

  <!-- Drawer Container - positioned below header -->
  <div class="header-drawer-container absolute left-0 right-0 bg-white dark:bg-gray-800 shadow-2xl border-b border-gray-200 dark:border-gray-700 transform -translate-y-full transition-transform duration-300 ease-out" style="top: 70px;">
    <!-- Drawer Content -->
    <div class="p-4 space-y-2 max-h-[calc(100vh-70px)] overflow-y-auto" id="header-actions-drawer-content">
      <!-- Buttons will be cloned here by JS -->
    </div>
  </div>
</div>

{{ end }}
