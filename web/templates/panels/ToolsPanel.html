<!-- Map Editor Tools Panel -->
<div id="tools-panel" class="h-full overflow-y-auto">
  <div class="p-4 space-y-6">
    <!-- Nature Terrains -->
    <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-4">
      <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-3">
        ğŸŒ¿ Nature Terrains
      </h3>
      <div
        id="nature-terrain-palette"
        class="grid grid-cols-3 gap-2 max-h-64 overflow-y-auto w-full"
      >
        <button
          class="terrain-button p-2 text-center border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-600"
          data-terrain="0"
          title="Clear"
        >
          <div class="text-sm">ğŸ—‘ï¸</div>
        </button>
        {{ range .NatureTerrains }}
        <button
          class="terrain-button p-2 text-xs text-center border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors{{ if eq .ID 0 }} bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-600{{ else if eq .ID 5 }} bg-blue-100 dark:bg-blue-900 border-blue-500{{ end }} overflow-hidden"
          data-terrain="{{ .ID }}"
          title="{{ .Name }}{{ if ne .ID 0 }} (Move: {{ .MoveCost }}, Defense: {{ .DefenseBonus }}){{ end }}"
        >
          {{ if eq .ID 0 }}
          <div class="text-sm">ğŸ—‘ï¸</div>
          {{ else if .IconDataURL }}
          <div class="flex justify-center mb-1">
            <img
              src="{{ .IconDataURL }}"
              alt="{{ .Name }}"
              class="w-6 h-6 object-contain"
            />
          </div>
          {{ else }}
          <div class="text-sm">ğŸ¨</div>
          {{ end }}
          <div class="text-xs truncate">{{ .Name }}</div>
        </button>
        {{ end }}
      </div>
    </div>

    <!-- City/Player Terrains -->
    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4">
      <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-3">
        ğŸ™ï¸ City Terrains
      </h3>
      <div class="space-y-3">
        <!-- Player Color Selection -->
        <div>
          <label
            class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"
            >Player Color:</label
          >
          <select
            id="player-color"
            class="block w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
          >
            <option value="0">Neutral (Gray)</option>
            <option value="1">Player 1 (Red)</option>
            <option value="2">Player 2 (Blue)</option>
            <option value="3">Player 3 (Green)</option>
            <option value="4">Player 4 (Yellow)</option>
            {{ if gt .PlayerCount 4 }}
            <option value="5">Player 5 (Orange)</option>
            <option value="6">Player 6 (Purple)</option>
            <option value="7">Player 7 (Pink)</option>
            <option value="8">Player 8 (Cyan)</option>
            {{ end }}
          </select>
        </div>

        <!-- City Terrain Palette -->
        <div id="city-terrain-palette" class="grid grid-cols-3 gap-2">
          {{ range .CityTerrains }}
          <button
            class="terrain-button p-2 text-center border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors overflow-hidden"
            data-terrain="{{ .ID }}"
            data-has-colors="true"
            title="{{ .Name }} (Move: {{ .MoveCost }}, Defense: {{ .DefenseBonus }})"
          >
            {{ if .IconDataURL }}
            <div class="flex justify-center mb-1">
              <img
                src="{{ .IconDataURL }}"
                alt="{{ .Name }}"
                class="w-6 h-6 object-contain"
              />
            </div>
            {{ else }}
            <div class="text-sm">ğŸ™ï¸</div>
            {{ end }}
            <div class="text-xs truncate">{{ .Name }}</div>
          </button>
          {{ end }}
        </div>
      </div>
    </div>

    <!-- Units -->
    <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4">
      <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-3">
        ğŸª– Units
      </h3>
      <div class="space-y-3">
        <!-- Player Color Selection for Units -->
        <div>
          <label
            class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"
            >Unit Player:</label
          >
          <select
            id="unit-player-color"
            class="block w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
          >
            <option value="1">Player 1 (Red)</option>
            <option value="2">Player 2 (Blue)</option>
            <option value="3">Player 3 (Green)</option>
            <option value="4">Player 4 (Yellow)</option>
            {{ if gt .PlayerCount 4 }}
            <option value="5">Player 5 (Orange)</option>
            <option value="6">Player 6 (Purple)</option>
            <option value="7">Player 7 (Pink)</option>
            <option value="8">Player 8 (Cyan)</option>
            {{ end }}
          </select>
        </div>

        <!-- Unit Palette -->
        <div
          id="unit-palette"
          class="grid grid-cols-3 gap-2 max-h-64 overflow-y-auto"
        >
          {{ range .UnitTypes }}
          <button
            class="unit-button p-2 text-center border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors overflow-hidden"
            data-unit="{{ .ID }}"
            title="{{ .Name }}"
          >
            {{ if .IconDataURL }}
            <div class="flex justify-center mb-1">
              <img
                src="{{ .IconDataURL }}"
                alt="{{ .Name }}"
                class="w-6 h-6 object-contain"
              />
            </div>
            {{ else }}
            <div class="text-sm">ğŸª–</div>
            {{ end }}
            <div class="text-xs truncate">{{ .Name }}</div>
          </button>
          {{ end }}
        </div>
      </div>
    </div>

    <!-- Painting Tools -->
    <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4">
      <h3 class="text-sm font-medium text-gray-900 dark:text-white mb-3">
        ğŸ¯ Painting Tools
      </h3>
      <div class="space-y-3">
        <div class="flex space-x-2">
          <div class="flex-1">
            <label
              class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"
              >Row:</label
            >
            <input
              type="number"
              id="paint-row"
              placeholder="0"
              min="0"
              value="2"
              class="block w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
            />
          </div>
          <div class="flex-1">
            <label
              class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"
              >Col:</label
            >
            <input
              type="number"
              id="paint-col"
              placeholder="0"
              min="0"
              value="2"
              class="block w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
            />
          </div>
        </div>
        <div class="grid grid-cols-2 gap-2">
          <button
            data-action="paint-terrain"
            class="px-3 py-2 text-xs bg-green-600 text-white rounded hover:bg-green-700"
          >
            ğŸ–Œï¸ Paint
          </button>
          <button
            data-action="flood-fill"
            class="px-3 py-2 text-xs bg-blue-600 text-white rounded hover:bg-blue-700"
          >
            ğŸŒŠ Flood Fill
          </button>
          <button
            data-action="remove-terrain"
            class="col-span-2 px-3 py-2 text-xs bg-red-600 text-white rounded hover:bg-red-700"
          >
            ğŸ—‘ï¸ Remove
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
